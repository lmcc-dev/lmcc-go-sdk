# Server æ¨¡å—

`pkg/server` æ¨¡å—æä¾›äº†ç»Ÿä¸€çš„ Web æ¡†æ¶æŠ½è±¡ï¼Œæ”¯æŒåŸºäºæ’ä»¶çš„æœåŠ¡å™¨æ¶æ„ï¼Œå…¼å®¹å¤šç§æµè¡Œçš„ Go Web æ¡†æ¶ï¼ŒåŒ…æ‹¬ Ginã€Echo å’Œ Fiberã€‚æ­¤æ¨¡å—æ—¨åœ¨ç®€åŒ–æœåŠ¡å™¨å¼€å‘ï¼ŒåŒæ—¶ä¿æŒçµæ´»æ€§å’Œé«˜æ€§èƒ½ã€‚

## å¿«é€Ÿé“¾æ¥

- **[è‹±æ–‡æ–‡æ¡£](README.md)** - English documentation
- **[å¿«é€Ÿå¼€å§‹æŒ‡å—](zh/01_quick_start.md)** - å‡ åˆ†é’Ÿå†…ä¸Šæ‰‹
- **[æ¡†æ¶æ’ä»¶](zh/03_framework_plugins.md)** - Ginã€Echoã€Fiber æ”¯æŒ
- **[ä¸­é—´ä»¶ç³»ç»Ÿ](zh/04_middleware_system.md)** - ç»Ÿä¸€ä¸­é—´ä»¶æ¶æ„
- **[æœåŠ¡å™¨ç®¡ç†](zh/05_server_management.md)** - ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **[é›†æˆç¤ºä¾‹](zh/06_integration_examples.md)** - å®é™…åº”ç”¨ç¤ºä¾‹
- **[æœ€ä½³å®è·µ](zh/07_best_practices.md)** - ç”Ÿäº§ç¯å¢ƒå»ºè®®
- **[æ¨¡å—è§„èŒƒ](zh/09_module_specification.md)** - å®Œæ•´ API å‚è€ƒ

## ç‰¹æ€§

### ğŸ”Œ åŸºäºæ’ä»¶çš„æ¶æ„
- **æ¡†æ¶æŠ½è±¡**: ä¸ºä¸åŒ Web æ¡†æ¶æä¾›ç»Ÿä¸€æ¥å£
- **çƒ­æ’æ‹”æ’ä»¶**: æ”¯æŒ Ginã€Echo å’Œ Fiber æ¡†æ¶
- **è‡ªå®šä¹‰æ’ä»¶å¼€å‘**: ä¸ºæ–°æ¡†æ¶æä¾›å¯æ‰©å±•çš„æ’ä»¶ç³»ç»Ÿ
- **æ¡†æ¶æ— å…³ä»£ç **: ä¸€æ¬¡ç¼–å†™ï¼Œåœ¨ä»»ä½•æ”¯æŒçš„æ¡†æ¶ä¸Šè¿è¡Œ

### ğŸš€ é«˜æ€§èƒ½
- **é«˜æ•ˆè·¯ç”±**: é’ˆå¯¹é«˜ååé‡åº”ç”¨è¿›è¡Œä¼˜åŒ–
- **æœ€å°å¼€é”€**: è½»é‡çº§æŠ½è±¡å±‚
- **è¿æ¥æ± **: å†…ç½®è¿æ¥ç®¡ç†
- **ä¼˜é›…å…³é—­**: é›¶åœæœºéƒ¨ç½²

### ğŸ› ï¸ å®Œæ•´çš„ä¸­é—´ä»¶ç³»ç»Ÿ
- **å†…ç½®ä¸­é—´ä»¶**: æ—¥å¿—è®°å½•ã€æ¢å¤ã€è·¨åŸŸã€é™æµã€è®¤è¯ç­‰
- **ç»Ÿä¸€æ¥å£**: æ‰€æœ‰æ¡†æ¶ä¸­ä¸€è‡´çš„ä¸­é—´ä»¶ API
- **è‡ªå®šä¹‰ä¸­é—´ä»¶**: è½»æ¾å¼€å‘åº”ç”¨ç‰¹å®šçš„ä¸­é—´ä»¶
- **ä¸­é—´ä»¶é“¾**: çµæ´»çš„ä¸­é—´ä»¶ç»„åˆå’Œæ’åº

### âš™ï¸ é«˜çº§é…ç½®
- **çµæ´»é…ç½®**: å…¨é¢çš„æœåŠ¡å™¨é…ç½®é€‰é¡¹
- **çƒ­é‡è½½**: æ— éœ€é‡å¯çš„åŠ¨æ€é…ç½®æ›´æ–°
- **ç¯å¢ƒç‰¹å®š**: æ”¯æŒä¸åŒéƒ¨ç½²ç¯å¢ƒ
- **éªŒè¯**: å†…ç½®é…ç½®éªŒè¯å’Œé”™è¯¯å¤„ç†

### ğŸ”— æ·±åº¦é›†æˆ
- **é…ç½®æ¨¡å—**: ä¸ `pkg/config` æ— ç¼é›†æˆ
- **æ—¥å¿—æ¨¡å—**: ä¸ `pkg/log` å†…ç½®é›†æˆ
- **é”™è¯¯å¤„ç†**: åŸç”Ÿæ”¯æŒ `pkg/errors`
- **æœåŠ¡å®¹å™¨**: ä¾èµ–æ³¨å…¥å’ŒæœåŠ¡ç®¡ç†

## å¿«é€Ÿç¤ºä¾‹

```go
package main

import (
    "context"
    "log"
    
    "github.com/lmcc-dev/lmcc-go-sdk/pkg/server"
)

func main() {
    // åˆ›å»ºæœåŠ¡å™¨é…ç½® (Create server configuration)
    config := server.DefaultServerConfig()
    config.Framework = "gin"
    config.Host = "0.0.0.0"
    config.Port = 8080
    
    // åˆ›å»ºæœåŠ¡å™¨ç®¡ç†å™¨ (Create server manager)
    manager, err := server.CreateServerManager("gin", config)
    if err != nil {
        log.Fatal(err)
    }
    
    // æ³¨å†Œç®€å•è·¯ç”± (Register a simple route)
    err = manager.GetFramework().RegisterRoute("GET", "/health", 
        server.HandlerFunc(func(ctx server.Context) error {
            return ctx.JSON(200, map[string]string{
                "status": "healthy",
                "framework": "gin",
            })
        }),
    )
    if err != nil {
        log.Fatal(err)
    }
    
    // å¯åŠ¨æœåŠ¡å™¨ (Start server)
    log.Println("Starting server on :8080")
    if err := manager.Start(context.Background()); err != nil {
        log.Fatal(err)
    }
}
```

## æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨å±‚ (Application Layer)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 ç»Ÿä¸€æœåŠ¡å™¨æ¥å£ (Unified Interface)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   è·¯ç”±ç»„    â”‚ â”‚   ä¸­é—´ä»¶    â”‚ â”‚    æœåŠ¡å™¨ç®¡ç†å™¨         â”‚ â”‚
â”‚  â”‚  (Router)   â”‚ â”‚ (Middleware)â”‚ â”‚ (Server Manager)        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   æ’ä»¶æ¶æ„ (Plugin Architecture)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Gin æ’ä»¶    â”‚ â”‚Echo æ’ä»¶    â”‚ â”‚    Fiber æ’ä»¶           â”‚ â”‚
â”‚  â”‚ (Adapter)   â”‚ â”‚ (Adapter)   â”‚ â”‚    (Adapter)            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                æ¡†æ¶åŸç”Ÿå±‚ (Framework Native Layer)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚Gin Engine   â”‚ â”‚Echo Instanceâ”‚ â”‚    Fiber App            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ”¯æŒçš„æ¡†æ¶

| æ¡†æ¶ | ç‰ˆæœ¬ | çŠ¶æ€ | ç‰¹æ€§ |
|------|------|------|------|
| **Gin** | v1.9+ | âœ… ç”Ÿäº§å°±ç»ª | é«˜æ€§èƒ½ï¼Œä¸°å¯Œçš„ä¸­é—´ä»¶ç”Ÿæ€ç³»ç»Ÿ |
| **Echo** | v4.0+ | âœ… ç”Ÿäº§å°±ç»ª | æç®€ä¸»ä¹‰ï¼Œå¿«é€Ÿï¼Œå¯æ‰©å±• |
| **Fiber** | v2.0+ | âœ… ç”Ÿäº§å°±ç»ª | å— Express å¯å‘ï¼Œè¶…å¿«é€Ÿ |

## å®‰è£…

server æ¨¡å—æ˜¯ lmcc-go-sdk çš„ä¸€éƒ¨åˆ†ï¼š

```bash
go get github.com/lmcc-dev/lmcc-go-sdk
```

## æ¡†æ¶ç‰¹å®šçš„å¿«é€Ÿå¼€å§‹

### Gin æ¡†æ¶
```go
config := server.DefaultServerConfig()
config.Framework = "gin"
manager, _ := server.CreateServerManager("gin", config)
```

### Echo æ¡†æ¶
```go
config := server.DefaultServerConfig()
config.Framework = "echo"
manager, _ := server.CreateServerManager("echo", config)
```

### Fiber æ¡†æ¶
```go
config := server.DefaultServerConfig()
config.Framework = "fiber"
manager, _ := server.CreateServerManager("fiber", config)
```

## ä¸å…¶ä»–æ¨¡å—çš„é›†æˆ

server æ¨¡å—ä¸å…¶ä»– SDK æ¨¡å—æ— ç¼é›†æˆï¼š

```go
import (
    "github.com/lmcc-dev/lmcc-go-sdk/pkg/server"
    "github.com/lmcc-dev/lmcc-go-sdk/pkg/config"
    "github.com/lmcc-dev/lmcc-go-sdk/pkg/log"
)

type AppConfig struct {
    Server server.ServerConfig `mapstructure:"server"`
    Log    log.Options         `mapstructure:"log"`
}

func main() {
    var cfg AppConfig
    
    // åŠ è½½é…ç½® (Load configuration)
    config.LoadConfig(&cfg, 
        config.WithConfigFile("config.yaml", ""),
        config.WithHotReload(true),
    )
    
    // åˆå§‹åŒ–æ—¥å¿— (Initialize logging)
    log.Init(&cfg.Log)
    
    // ä½¿ç”¨é›†æˆé…ç½®åˆ›å»ºæœåŠ¡å™¨ (Create server with integrated configuration)
    manager, _ := server.CreateServerManager(cfg.Server.Framework, &cfg.Server)
    
    // å¯åŠ¨æœåŠ¡å™¨ (Start server)
    manager.Start(context.Background())
}
```

## å¼€å§‹ä½¿ç”¨

1. **[å¿«é€Ÿå¼€å§‹æŒ‡å—](zh/01_quick_start.md)** - åŸºç¡€è®¾ç½®å’Œä½¿ç”¨
2. **[é…ç½®æŒ‡å—](zh/02_configuration.md)** - æœåŠ¡å™¨é…ç½®é€‰é¡¹
3. **[æ¡†æ¶æ’ä»¶](zh/03_framework_plugins.md)** - é€‰æ‹©æ‚¨çš„æ¡†æ¶
4. **[ä¸­é—´ä»¶ç³»ç»Ÿ](zh/04_middleware_system.md)** - ä½¿ç”¨ä¸­é—´ä»¶æ·»åŠ åŠŸèƒ½

## è´¡çŒ®

åœ¨æäº¤æ‹‰å–è¯·æ±‚ä¹‹å‰ï¼Œè¯·é˜…è¯»æˆ‘ä»¬çš„[è´¡çŒ®æŒ‡å—](../../../CONTRIBUTING.md)ã€‚

## è®¸å¯è¯

æ­¤é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ [LICENSE](../../../LICENSE) æ–‡ä»¶ã€‚ 