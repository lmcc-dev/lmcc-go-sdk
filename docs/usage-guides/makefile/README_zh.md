# Makefile æ–‡æ¡£

æœ¬ç›®å½•åŒ…å« `lmcc-go-sdk` Makefile ç³»ç»Ÿçš„å…¨é¢æ–‡æ¡£ã€‚

## ğŸ“– æ–‡æ¡£æ–‡ä»¶

- **[English Guide](makefile_usage_en.md)** - å®Œæ•´çš„è‹±æ–‡ Makefile ä½¿ç”¨æŒ‡å—
- **[ä¸­æ–‡æŒ‡å—](makefile_usage_zh.md)** - å®Œæ•´çš„ä¸­æ–‡ Makefile ä½¿ç”¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå‚è€ƒ

### æ ¸å¿ƒå¼€å‘å‘½ä»¤
```bash
make help              # æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å‘½ä»¤
make all               # æ ¼å¼åŒ–ã€æ£€æŸ¥ã€æµ‹è¯•å’Œæ•´ç†ï¼ˆé»˜è®¤ï¼‰
make format            # æ ¼å¼åŒ– Go æºä»£ç 
make lint              # è¿è¡Œä»£ç æ£€æŸ¥å™¨
make test-unit         # è¿è¡Œå•å…ƒæµ‹è¯•
make test-integration  # è¿è¡Œé›†æˆæµ‹è¯•
make cover             # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
make tidy              # æ•´ç† go æ¨¡å—
make clean             # åˆ é™¤æ„å»ºäº§ç‰©
```

### ç¤ºä¾‹ç®¡ç†ï¼ˆ5 ä¸ªåˆ†ç±»ä¸­çš„ 19 ä¸ªç¤ºä¾‹ï¼‰
```bash
make examples-list                           # åˆ—å‡ºæ‰€æœ‰ç¤ºä¾‹
make examples-build                          # æ„å»ºæ‰€æœ‰ç¤ºä¾‹
make examples-run EXAMPLE=basic-usage       # è¿è¡Œç‰¹å®šç¤ºä¾‹
make examples-run-all                       # è¿è¡Œæ‰€æœ‰ç¤ºä¾‹
make examples-test                          # æµ‹è¯•æ‰€æœ‰ç¤ºä¾‹ï¼ˆæ£€æŸ¥ + æ„å»ºï¼‰
make examples-debug EXAMPLE=basic-usage     # ä½¿ç”¨ delve è°ƒè¯•
make examples-analyze                       # åˆ†æç¤ºä¾‹ç»“æ„
make examples-category CATEGORY=config-features  # æŒ‰åˆ†ç±»è¿è¡Œç¤ºä¾‹
make examples-clean                         # æ¸…ç†ç¤ºä¾‹äºŒè¿›åˆ¶æ–‡ä»¶
```

### æ–‡æ¡£å‘½ä»¤
```bash
make doc-view PKG=./pkg/log    # åœ¨ç»ˆç«¯æŸ¥çœ‹åŒ…æ–‡æ¡£
make doc-serve                 # å¯åŠ¨æœ¬åœ°æ–‡æ¡£æœåŠ¡å™¨
```

### å·¥å…·ç®¡ç†
```bash
make tools                     # å®‰è£…æ‰€æœ‰å¿…éœ€å·¥å…·
make tools.version            # æ˜¾ç¤ºå·¥å…·ç‰ˆæœ¬
make tools.help               # æ˜¾ç¤ºå·¥å…·å¸®åŠ©
```

## ğŸ“Š ç¤ºä¾‹æ¦‚è§ˆ

é¡¹ç›®åŒ…å« **19 ä¸ªç¤ºä¾‹**ï¼Œåˆ†ä¸º **5 ä¸ªåˆ†ç±»**ï¼š

| åˆ†ç±» | æ•°é‡ | æè¿° |
|------|------|------|
| `basic-usage` | 1 | åŸºç¡€é›†æˆç¤ºä¾‹ |
| `config-features` | 5 | é…ç½®æ¨¡å—æ¼”ç¤º |
| `error-handling` | 5 | é”™è¯¯å¤„ç†æ¨¡å¼ |
| `integration` | 3 | å®Œæ•´é›†æˆåœºæ™¯ |
| `logging-features` | 5 | æ—¥å¿—æ¨¡å—åŠŸèƒ½ |

## ğŸ¯ å¸¸ç”¨å·¥ä½œæµ

### å¼€å‘å·¥ä½œæµ
```bash
# 1. æ ¼å¼åŒ–å’Œæ£€æŸ¥ä»£ç 
make format lint

# 2. è¿è¡Œæµ‹è¯•
make test-unit

# 3. æ£€æŸ¥è¦†ç›–ç‡
make cover

# 4. æµ‹è¯•ç¤ºä¾‹
make examples-test

# 5. æäº¤å‰çš„æœ€ç»ˆæ£€æŸ¥
make all
```

### ç¤ºä¾‹æ¢ç´¢
```bash
# 1. æŸ¥çœ‹å¯ç”¨ç¤ºä¾‹
make examples-list

# 2. å°è¯•åŸºç¡€ç¤ºä¾‹
make examples-run EXAMPLE=basic-usage

# 3. æ¢ç´¢æŸä¸ªåˆ†ç±»
make examples-category CATEGORY=config-features

# 4. å¿…è¦æ—¶è¿›è¡Œè°ƒè¯•
make examples-debug EXAMPLE=config-features/01-simple-config
```

### æ–‡æ¡£ç”Ÿæˆ
```bash
# 1. æŸ¥çœ‹ç‰¹å®šåŒ…çš„æ–‡æ¡£
make doc-view PKG=./pkg/config

# 2. å¯åŠ¨æ–‡æ¡£æœåŠ¡å™¨è¿›è¡Œæµè§ˆ
make doc-serve
# åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://localhost:6060
```

## ğŸ”§ å˜é‡

### åŒ…é€‰æ‹©
- `PKG=./path/to/package` - æŒ‡å®šæµ‹è¯•/è¦†ç›–ç‡çš„ç›®æ ‡åŒ…

### ç¤ºä¾‹ç®¡ç†
- `EXAMPLE=<åç§°>` - æŒ‡å®šè¦è¿è¡Œ/è°ƒè¯•çš„ç¤ºä¾‹
- `CATEGORY=<åç§°>` - æŒ‡å®šè¦è¿è¡Œçš„ç¤ºä¾‹åˆ†ç±»

### å·¥å…·é…ç½®
- `GOLANGCI_LINT_STRATEGY=stable|latest|auto` - æ£€æŸ¥å™¨ç‰ˆæœ¬ç­–ç•¥
- `V=1` - å¯ç”¨è¯¦ç»†è¾“å‡º

## ğŸ“ ç›®å½•ç»“æ„

```
scripts/make-rules/
â”œâ”€â”€ common.mk          # é€šç”¨å˜é‡å’Œå‡½æ•°
â”œâ”€â”€ golang.mk          # Go ç‰¹å®šçš„æ„å»ºè§„åˆ™
â””â”€â”€ tools.mk           # å·¥å…·å®‰è£…å’Œç®¡ç†

scripts/
â”œâ”€â”€ examples-build.sh     # æ„å»ºæ‰€æœ‰ç¤ºä¾‹
â”œâ”€â”€ examples-run-all.sh   # é¡ºåºè¿è¡Œæ‰€æœ‰ç¤ºä¾‹
â”œâ”€â”€ examples-analyze.sh   # åˆ†æç¤ºä¾‹ç»“æ„
â”œâ”€â”€ examples-category.sh  # æŒ‰åˆ†ç±»è¿è¡Œç¤ºä¾‹
â””â”€â”€ format-func-coverage.sh  # æ ¼å¼åŒ–è¦†ç›–ç‡è¾“å‡º
```

## ğŸª åŠŸèƒ½ç‰¹æ€§

### âœ… ä»£ç è´¨é‡
- è‡ªåŠ¨ä»£ç æ ¼å¼åŒ–ï¼ˆ`gofmt`ã€`goimports`ï¼‰
- å…¨é¢çš„ä»£ç æ£€æŸ¥ï¼ˆ`golangci-lint`ï¼‰
- ç«æ€æ¡ä»¶æ£€æµ‹
- ä»£ç è¦†ç›–ç‡æŠ¥å‘Š

### âœ… æµ‹è¯•
- æ”¯æŒåŒ…é€‰æ‹©çš„å•å…ƒæµ‹è¯•
- é›†æˆæµ‹è¯•
- è¦†ç›–ç‡æŠ¥å‘Šï¼ˆæ–‡æœ¬ + HTMLï¼‰
- å‡½æ•°çº§è¦†ç›–ç‡è¯¦æƒ…

### âœ… ç¤ºä¾‹ç®¡ç†
- è‡ªåŠ¨å‘ç°ç¤ºä¾‹
- å¹¶è¡Œæ„å»º
- åŸºäºåˆ†ç±»çš„æ‰§è¡Œ
- äº¤äº’å¼è°ƒè¯•
- å…¨é¢åˆ†æ

### âœ… æ–‡æ¡£
- ç»ˆç«¯æ–‡æ¡£æŸ¥çœ‹
- æœ¬åœ°æ–‡æ¡£æœåŠ¡å™¨
- è‡ªåŠ¨å·¥å…·å®‰è£…

### âœ… å¼€å‘å·¥å…·
- è‡ªåŠ¨å·¥å…·å®‰è£…
- ç‰ˆæœ¬ç®¡ç†ç­–ç•¥
- å·¥å…·ç‰ˆæœ¬æŠ¥å‘Š

## ğŸ“š äº†è§£æ›´å¤š

è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ï¼š
- [English Documentation](makefile_usage_en.md)
- [ä¸­æ–‡æ–‡æ¡£](makefile_usage_zh.md)

## ğŸ¤ è´¡çŒ®

æ·»åŠ æ–°çš„ Makefile ç›®æ ‡æ—¶ï¼š
1. ä½¿ç”¨ `## æ³¨é‡Š` æ·»åŠ é€‚å½“çš„å¸®åŠ©æ–‡æœ¬
2. éµå¾ªç°æœ‰çš„å‘½åçº¦å®š
3. æ›´æ–°æ–‡æ¡£
4. å…¨é¢æµ‹è¯•

æ·»åŠ æ–°ç¤ºä¾‹æ—¶ï¼š
1. åœ¨ `examples/` ä¸‹åˆ›å»ºç›®å½•
2. åŒ…å« `main.go` æ–‡ä»¶
3. æ·»åŠ åˆ†ç±»ç›¸å…³çš„æ–‡æ¡£
4. ç¤ºä¾‹ä¼šè‡ªåŠ¨è¢«æ£€æµ‹ 